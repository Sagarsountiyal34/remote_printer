<!-- Breadcrumbs-->
<ol class="breadcrumb">
    <li class="breadcrumb-item active">Uploaded Document History</li>
</ol>
<!-- Icon Cards-->
<!-- <div class="row">
  <div class="col-xl-3 col-sm-6 mb-3">
    <div class="card text-white bg-primary o-hidden h-100">
      <div class="card-body">
        <div class="card-body-icon">
          <i class="fas fa-fw fa-comments"></i>
        </div>
        <div class="mr-5">26 New Messages!</div>
      </div>
      <a class="card-footer text-white clearfix small z-1" href="#">
        <span class="float-left">View Details</span>
        <span class="float-right">
          <i class="fas fa-angle-right"></i>
        </span>
      </a>
    </div>
  </div>
  <div class="col-xl-3 col-sm-6 mb-3">
    <div class="card text-white bg-warning o-hidden h-100">
      <div class="card-body">
        <div class="card-body-icon">
          <i class="fas fa-fw fa-list"></i>
        </div>
        <div class="mr-5">11 New Tasks!</div>
      </div>
      <a class="card-footer text-white clearfix small z-1" href="#">
        <span class="float-left">View Details</span>
        <span class="float-right">
          <i class="fas fa-angle-right"></i>
        </span>
      </a>
    </div>
  </div>
  <div class="col-xl-3 col-sm-6 mb-3">
    <div class="card text-white bg-success o-hidden h-100">
      <div class="card-body">
        <div class="card-body-icon">
          <i class="fas fa-fw fa-shopping-cart"></i>
        </div>
        <div class="mr-5">123 New Orders!</div>
      </div>
      <a class="card-footer text-white clearfix small z-1" href="#">
        <span class="float-left">View Details</span>
        <span class="float-right">
          <i class="fas fa-angle-right"></i>
        </span>
      </a>
    </div>
  </div>
  <div class="col-xl-3 col-sm-6 mb-3">
    <div class="card text-white bg-danger o-hidden h-100">
      <div class="card-body">
        <div class="card-body-icon">
          <i class="fas fa-fw fa-life-ring"></i>
        </div>
        <div class="mr-5">13 New Tickets!</div>
      </div>
      <a class="card-footer text-white clearfix small z-1" href="#">
        <span class="float-left">View Details</span>
        <span class="float-right">
          <i class="fas fa-angle-right"></i>
        </span>
      </a>
    </div>
  </div>
</div> -->
<div class="card mb-3">
    <div class="card-header">
        <i class="fas fa-table"></i>
        Documents</div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered document_table" id="dataTable" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th width="20%">Preview</th>
                        <th width="40%">Name</th>
                        <th width="40%">Type</th>
                    </tr>
                </thead>
                <tbody id="tbody_head">
                    <% @upload_documents.each do |a| %>
                    <tr data-id="<%= a.id%>" class="document_record">
                        <td width="30%">
                            <div class="item gallery_item" data-iframe="<%= have_to_show_iframe(a) %>" data-src="<%= a.get_preview_url %>">
                                <a href="javscript:;"><i class="fas fa-eye"></i></a>
                            </div>
                        </td>
                        <td width="40%">
                            <%= a.document_name %>
                        </td>
                        <td width="40%">
                            <%= FileInfo.get_file_media_type(a.document_url).capitalize %>
                        </td>

                    </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
    <% if @upload_documents.present? %>
    <div class="card-footer small text-muted">Updated at
        <%= @upload_documents.first.updated_at.strftime("%d %B %Y , %l:%M %p") %>
    </div>
    <% end %>
</div>
<script>
$(document).ready(function() {
    $('#dataTable').DataTable({
        "ordering": false,
    });
});
$('#tbody_head').lightGallery({
    selector: '.gallery_item',
    iframeMaxWidth: '80%',
    thumbnail: false,
});
// $(".remove_document").click(function() {
//     var self = this;
//     var document_id = [$(this).closest('.document_record').data('id')];
//     var main_tr = $('tr.document_record[data-id="' + document_id[0] + '"]')
//     $(this).prop('disabled', true);

//     function onSuccess(response) {
//         main_tr.remove();
//         jQuery('nav span.total_group_item').text(response.total_group_item);
//     }

//     function onError(reponse) {
//         $(self).removeAttr('disabled');
//     }
//     removeDocument(document_id, onSuccess, onError);
// });


// function removeDocument(document_ids, successcb, errorcb) {
//     $.ajax({
//         type: "POST",
//         beforeSend: setCsrfToken, // implemented in
//         url: "/remove_documents",
//         data: { document_ids: document_ids },
//         success: function(data) {
//             if (successcb) successcb(data);
//         },
//         error: function(exception) {
//             if (successcb) successcb(exception);
//         }
//     });
// }

// function setCsrfToken(xhr) {
//     xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))
// }
</script>